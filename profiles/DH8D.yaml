metadata:
  name: FlyJSim Q400
  description: Dash 8 400 Q4XP from FlyJsim
  selectors:
    - DH8D

buttons:

  hdg:
    single_click:
      - command_str: "sim/autopilot/heading"
    double_click:
      - command_str: "sim/autopilot/heading_sync_pilot"
  nav:
    single_click:
      - command_str: "sim/autopilot/NAV"
    double_click:
      - command_str: "sim/autopilot/gpss"
  apr:
    single_click:
      - command_str: "sim/autopilot/approach"
    double_click:
      - command_str: "sim/autopilot/approach"
  rev:
    single_click:
      - command_str: "sim/autopilot/back_course"
    double_click:
      - command_str: "sim/autopilot/back_course"
  alt:
    single_click:
      - command_str: "sim/autopilot/altitude_hold"
    double_click:
      - command_str: "sim/autopilot/altitude_hold"
  vs:
    single_click:
      - command_str: "sim/autopilot/vertical_speed"
    double_click:
      - command_str: "sim/autopilot/vertical_speed"
  ias:
    single_click:
      - command_str: "sim/autopilot/speed_hold"
    double_click:
      - command_str: "sim/autopilot/speed_hold"
  ap:
    single_click:
      - command_str: "sim/autopilot/servos_toggle"
    double_click:
      - command_str: "sim/autopilot/servos_toggle"


knobs:

  ap_alt:
    datarefs:
      - dataref_str: "sim/cockpit2/autopilot/altitude_dial_ft"
  ap_vs:
    datarefs:
      - dataref_str: "sim/cockpit/autopilot/vertical_velocity"
  ap_hdg:
    datarefs:
      - dataref_str: "sim/cockpit2/autopilot/heading_dial_deg_mag_pilot"
  ap_crs:
    datarefs:
      - dataref_str: "sim/cockpit/radios/nav1_obs_degm"
  ap_ias:
    datarefs:
      - dataref_str: "sim/cockpit2/autopilot/airspeed_dial_kts_mach"


leds:

  hdg:
    condition: "any"
    datarefs:
      - dataref_str: "FJS/Q4XP/FMA/roll_act"
        operator: "=="
        threshold: 2
      - dataref_str: "FJS/Q4XP/FMA/roll_act"
        operator: "=="
        threshold: 4

  nav:
    condition: "any"
    datarefs:
      - dataref_str: "FJS/Q4XP/FMA/roll_act"
        operator: "=="
        threshold: 17
      - dataref_str: "FJS/Q4XP/FMA/roll_act"
        operator: "=="
        threshold: 18
      - dataref_str: "FJS/Q4XP/FMA/roll_act"
        operator: "=="
        threshold: 19
      - dataref_str: "FJS/Q4XP/FMA/roll_act"
        operator: "=="
        threshold: 5
      - dataref_str: "FJS/Q4XP/FMA/roll_act"
        operator: "=="
        threshold: 6
      - dataref_str: "FJS/Q4XP/FMA/roll_arm"
        operator: "=="
        threshold: 1

  apr:
    condition: "any"
    datarefs:
      - dataref_str: "FJS/Q4XP/FMA/roll_act"
        operator: "=="
        threshold: 8
      - dataref_str: "FJS/Q4XP/FMA/roll_act"
        operator: "=="
        threshold: 9
      - dataref_str: "FJS/Q4XP/FMA/roll_act"
        operator: "=="
        threshold: 10
      - dataref_str: "FJS/Q4XP/FMA/roll_act"
        operator: "=="
        threshold: 11
      - dataref_str: "FJS/Q4XP/FMA/pitch_arm"
        operator: "=="
        threshold: 2
      - dataref_str: "FJS/Q4XP/FMA/pitch_act"
        operator: "=="
        threshold: 7
      - dataref_str: "FJS/Q4XP/FMA/pitch_act"
        operator: "=="
        threshold: 8

  rev:
    condition: "any"
    datarefs:
      - dataref_str: "FJS/Q4XP/FMA/roll_arm"
        operator: "=="
        threshold: 4
      - dataref_str: "FJS/Q4XP/FMA/roll_act"
        operator: "=="
        threshold: 13

  alt:
    condition: "any"
    datarefs:
      - dataref_str: "FJS/Q4XP/FMA/pitch_act"
        operator: "=="
        threshold: 4
      - dataref_str: "FJS/Q4XP/FMA/pitch_act"
        operator: "=="
        threshold: 5
 
  vs:
    datarefs:    
      - dataref_str: "FJS/Q4XP/FMA/pitch_act"
        operator: "=="
        threshold: 3

  ias:
    datarefs:
      - dataref_str: "FJS/Q4XP/FMA/pitch_act"
        operator: "=="
        threshold: 2

  ap:
    datarefs:
      - dataref_str: "sim/cockpit2/autopilot/servos_on"
        operator: ">"
        threshold: 0.01

  master_warn:
    datarefs:
      - dataref_str: "FJS/Q4XP/Annunciators/CautWarn_Lit"
        operator: "!="
        threshold: 0
        index: 0

  fire:
    condition: "any"
    datarefs:
      - dataref_str: "FJS/Q4XP/Manips/TwoSwitch_Anim"
        operator: "<"
        threshold: -0.01
        index: 41
      - dataref_str: "FJS/Q4XP/Manips/TwoSwitch_Anim"
        operator: ">"
        threshold: 0.01
        index: 41

  oil_low_pressure:
    datarefs:
      - dataref_str: "sim/flightmodel/engine/ENGN_oil_press"
        operator: "<"
        threshold: 0.075

  fuel_low_pressure:
    datarefs:
      - dataref_str: "sim/cockpit2/engine/indicators/fuel_pressure_psi"
        operator: "<"
        threshold: 20

  anti_ice:
    condition: any
    datarefs:
      - dataref_str: "FJS/Q4XP/Annunciators/CWP_Annuns_Lit"
        operator: "=="
        threshold: 1
        index: 16
      - dataref_str: "FJS/Q4XP/Annunciators/CWP_Annuns_Lit"
        operator: "=="
        threshold: 1
        index: 17
      - dataref_str: "FJS/Q4XP/Annunciators/CWP_Annuns_Lit"
        operator: "=="
        threshold: 1
        index: 2

  eng_starter:
    datarefs:
      - dataref_str: "sim/cockpit2/engine/actuators/starter_hit"
        operator: ">"
        threshold: 0.01

  apu:
    datarefs:
      - dataref_str: "sim/cockpit2/electrical/APU_running"
        operator: ">"
        threshold: 0.01

  master_caution:
    datarefs:
      - dataref_str: "FJS/Q4XP/Annunciators/CautWarn_Lit"
        operator: "!="
        threshold: 0
        index: 1

  vacuum:
    condition: "any"
    datarefs:
      - dataref_str: "sim/cockpit/misc/vacuum"
        operator: "<"
        threshold: 1
      - dataref_str: "sim/cockpit/misc/vacuum2"
        operator: "<"
        threshold: 1

  hydro_low_pressure:
    condition: "all"
    datarefs:
      - dataref_str: "sim/operation/failures/hydraulic_pressure_ratio"
        operator: "<"
        threshold: 3002

  aux_fuel_pump:
    condition: "any"
    datarefs:
      - dataref_str: "sim/cockpit/engine/fuel_pump_on"
        operator: ">"
        threshold: 0.01
        index: 0
      - dataref_str: "sim/cockpit/engine/fuel_pump_on"
        operator: ">"
        threshold: 0.01
        index: 1

  parking_brake:
    datarefs:
      - dataref_str: "sim/cockpit2/controls/parking_brake_ratio"
        operator: ">"
        threshold: 0.999

  volt_low:
    datarefs:
      - dataref_str: "sim/cockpit2/electrical/bus_load_amps"
        operator: ">"
        threshold: 4

  doors:
    condition: "any"
    datarefs:
      - dataref_str: "FJS/Q4XP/Manips/CabinMainDoor_Anim"
        operator: ">"
        threshold: 0.01
        index: 0
      - dataref_str: "FJS/Q4XP/Manips/CargoDoor_Anim"
        operator: ">"
        threshold: 0.01
        index: 0

  gear:
    datarefs:
      - dataref_str: "sim/flightmodel2/gear/deploy_ratio"
        operator: "!="
        threshold: 0

conditions:

  retractable_gear:
    datarefs:
      - dataref_str: "sim/aircraft/gear/acf_gear_retract"
        operator: "!="
        threshold: 0

  bus_voltage:
    condition: "any"
    datarefs:
      - dataref_str: "sim/cockpit/electrical/battery_array_on"
        operator: ">"
        threshold: 0.01
        index: 0
      - dataref_str: "sim/cockpit/electrical/battery_array_on"
        operator: ">"
        threshold: 0.01
        index: 1
      - dataref_str: "sim/cockpit/electrical/battery_array_on"
        operator: ">"
        threshold: 0.01
        index: 2
      - dataref_str: "sim/cockpit/electrical/battery_array_on"
        operator: ">"
        threshold: 0.01
        index: 3
data:
  ap_vs_step:
    datarefs:
      - dataref_str: "sim/aircraft/autopilot/vvi_step_ft"